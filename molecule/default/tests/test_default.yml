# Molecule managed

---
package:
{{range .Vars.rbenv.packages}}
  {{.}}:
    installed: true
{{end}}

file:
  {{.Vars.rbenv.root}}:
    exists: true
    owner: root
    group: root
    filetype: directory

  {{.Vars.rbenv.root}}/bin/rbenv:
    exists: true
    owner: root
    group: root

  {{.Vars.rbenv.root}}/plugins:
    exists: true
    owner: root
    group: root
    filetype: directory

  {{range .Vars.rbenv.plugins}}
  {{$.Vars.rbenv.root}}/plugins/{{.}}:
    exists: true
    owner: root
    group: root
    filetype: directory
  {{end}}

  {{range .Vars.rbenv.rubies}}
  {{$.Vars.rbenv.root}}/versions/{{.}}:
    exists: true
    owner: root
    group: root
    filetype: directory
  {{end}}

command:
  $SHELL -lc "rbenv --version":
    exit-status: 0
    stdout:
      - rbenv {{.Vars.rbenv.version}}
